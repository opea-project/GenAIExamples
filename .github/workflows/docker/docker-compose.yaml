# Copyright (C) 2024 Intel Corporation
# SPDX-License-Identifier: Apache-2.0

services:
  chatqna-megaservice-server:
    build:
      args:
        http_proxy: ${http_proxy}
        https_proxy: ${https_proxy}
      context: ../../../ChatQnA/microservice/xeon
      dockerfile: docker/Dockerfile
    image: ${REGISTRY}/${REPO}:b-${GITHUB_RUN_NUMBER:-0}-chatqna-megaservice-server
    pull_policy: always
  chatqna-ui-server:
    build:
      args:
        http_proxy: ${http_proxy}
        https_proxy: ${https_proxy}
      context: ../../../ChatQnA/ui
    extends: chatqna-megaservice-server
    image: ${REGISTRY}/${REPO}:b-${GITHUB_RUN_NUMBER:-0}-chatqna-ui-server
  codegen-megaservice-server:
    build:
      args:
        http_proxy: ${http_proxy}
        https_proxy: ${https_proxy}
      context: ../../../CodeGen/microservice/xeon
    extends: chatqna-megaservice-server
    image: ${REGISTRY}/${REPO}:b-${GITHUB_RUN_NUMBER:-0}-codegen-megaservice-server
  codegen-ui-server:
    build:
      args:
        http_proxy: ${http_proxy}
        https_proxy: ${https_proxy}
      context: ../../../CodeGen/ui
    extends: chatqna-megaservice-server
    image: ${REGISTRY}/${REPO}:b-${GITHUB_RUN_NUMBER:-0}-codegen-ui-server
