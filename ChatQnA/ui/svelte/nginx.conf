upstream sveltekit {
  server 127.0.0.1:3000;
  keepalive 8;
}

server {
  listen 5173;

  gzip on;
  gzip_proxied any;
  gzip_comp_level 6;
  gzip_buffers 16 8k;
  gzip_http_version 1.1;
  gzip_types font/woff2 text/css application/javascript application/json application/font-woff application/font-tff image/gif image/png image/svg+xml application/octet-stream;

  location / {
	proxy_pass http://sveltekit;
	proxy_redirect off;

	error_page 502 = @static;
  }

  location "/v1/chatqna" {
      proxy_pass $CHAT_BASE_URL;
  }

  location "/v1/dataprep/get_file" {
      proxy_pass $GET_FILE;
  }

  location "/v1/dataprep/delete_file" {
      proxy_pass $DELETE_FILE;
  }

  location "/v1/dataprep" {
      proxy_pass $UPLOAD_FILE_BASE_URL;
  }
}